local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")
local root = char:WaitForChild("HumanoidRootPart")

local speed = 40

-- à¸à¸±à¸™à¸«à¸¡à¸¸à¸™à¸¡à¸±à¹ˆà¸§
humanoid.AutoRotate = false

-- ===== Attachment =====
local att = Instance.new("Attachment")
att.Parent = root

-- ===== à¸„à¸¸à¸¡à¸à¸²à¸£à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™à¸—à¸µà¹ˆ =====
local vel = Instance.new("LinearVelocity")
vel.Attachment0 = att
vel.MaxForce = math.huge
vel.RelativeTo = Enum.ActuatorRelativeTo.World
vel.Parent = root

-- ===== à¸„à¸¸à¸¡à¸à¸²à¸£à¸«à¸¡à¸¸à¸™ (à¹„à¸¡à¹ˆà¸à¹‰à¸¡/à¹„à¸¡à¹ˆà¹€à¸­à¸µà¸¢à¸‡) =====
local align = Instance.new("AlignOrientation")
align.Attachment0 = att
align.MaxTorque = math.huge
align.Responsiveness = 25
align.RigidityEnabled = true
align.Parent = root

-- à¸ªà¸–à¸²à¸™à¸°à¸¥à¸­à¸¢à¸™à¸´à¹ˆà¸‡
humanoid:ChangeState(Enum.HumanoidStateType.Freefall)

RunService.RenderStepped:Connect(function()
    -- âŒ à¹„à¸¡à¹ˆà¹€à¸”à¸´à¸™ = à¸­à¸¢à¸¹à¹ˆà¸™à¸´à¹ˆà¸‡ (à¹à¸„à¹ˆà¸«à¸±à¸™à¹„à¸¡à¹ˆà¸‚à¸¢à¸±à¸š)
    if humanoid.MoveDirection.Magnitude == 0 then
        vel.VectorVelocity = Vector3.zero
        return
    end

    -- âœ… à¹€à¸”à¸´à¸™à¹à¸¥à¹‰à¸§ à¸„à¹ˆà¸­à¸¢à¹€à¸­à¸²à¸—à¸´à¸¨à¸ˆà¸²à¸à¸à¸¥à¹‰à¸­à¸‡ (à¸‚à¸¶à¹‰à¸™/à¸¥à¸‡à¹„à¸”à¹‰)
    local look = Camera.CFrame.LookVector
    local dir = look.Unit

    -- à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™à¸—à¸µà¹ˆ
    vel.VectorVelocity = dir * speed

    -- ðŸ”’ à¸¥à¹‡à¸­à¸à¸à¸²à¸£à¸«à¸¡à¸¸à¸™à¸•à¸±à¸§à¹€à¸‰à¸žà¸²à¸°à¹à¸™à¸§à¸£à¸²à¸š
    local flat = Vector3.new(dir.X, 0, dir.Z)
    if flat.Magnitude > 0 then
        align.CFrame = CFrame.lookAt(
            root.Position,
            root.Position + flat
        )
    end
end)
