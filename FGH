local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")
local root = char:WaitForChild("HumanoidRootPart")

local speed = 40

-- กันหมุนมั่ว
humanoid.AutoRotate = false

-- ===== Attachment =====
local att = Instance.new("Attachment")
att.Parent = root

-- ===== คุมการเคลื่อนที่ =====
local vel = Instance.new("LinearVelocity")
vel.Attachment0 = att
vel.MaxForce = math.huge
vel.RelativeTo = Enum.ActuatorRelativeTo.World
vel.Parent = root

-- ===== คุมการหมุน (ไม่ก้ม/ไม่เอียง) =====
local align = Instance.new("AlignOrientation")
align.Attachment0 = att
align.MaxTorque = math.huge
align.Responsiveness = 25
align.RigidityEnabled = true
align.Parent = root

-- สถานะลอยนิ่ง
humanoid:ChangeState(Enum.HumanoidStateType.Freefall)

RunService.RenderStepped:Connect(function()
    -- ❌ ไม่เดิน = อยู่นิ่ง (แค่หันไม่ขยับ)
    if humanoid.MoveDirection.Magnitude == 0 then
        vel.VectorVelocity = Vector3.zero
        return
    end

    -- ✅ เดินแล้ว ค่อยเอาทิศจา
